<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Add / Edit Account</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Oswald:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/styles.css" />
  <link rel="stylesheet" href="../assets/css/accounts.css" />
</head>
<body class="page">

  <!-- Header -->
  <header class="app-header app-header--band">
  <div class="app-header__inner">
    <!-- Left: Brand -->
    <a class="app-header__brand" href="../dashboard.html" aria-label="LEDGR Home">
      <img src="../assets/img/logo.png" alt="LEDGR ‚Äî The smart way to balance business" class="app-header__logo" />
    </a>

    <!-- Center: Primary Nav (inside the dark band) -->
    <nav class="nav nav--primary">
      <a class="nav__link is-active" href="./coa-list.html">Accounts</a>
      <a class="nav__link" href="../journal/je-create.html">Journal</a>
      <a class="nav__link" href="../reports/reports.html">Reports</a>
      <a class="nav__link" href="../dashboard.html">Dashboard</a>
    </nav>

    <!-- Right: Notifications + User -->
    <div class="app-header__right">
      <button class="icon-btn bell" aria-label="Notifications">üîî</button>
      <div class="user-chip" title="Signed in as">
        <span class="avatar" aria-hidden="true">A</span>
        <span class="user-chip__text">
          <strong id="userName">Admin User</strong>
          <span class="muted">Admin</span>
        </span>
      </div>
      <button class="icon-btn caret" aria-label="User menu" title="User menu">‚ñæ</button>
    </div>
  </div>
</header>

  <!-- Back link -->
  <nav class="back-nav back-nav--minimal">
    <a href="./coa-list.html" class="back-link" aria-label="Return to previous page">
      ‚Üê Return to Previous Page
    </a>
  </nav>

  <!-- Main -->
  <main class="container container--xl">

    <!-- Form card -->
    <section class="card card--fluid card--animate" aria-labelledby="formTitle">
      <header class="card__header">
        <h1 id="formTitle" class="h2">Add / Edit Account</h1>
        <p class="body1 muted">Fields marked * are required. <br>Account number must follow the category‚Äôs starting digit rule.</p>
      </header>

      <div id="formAlert" class="alert -error is-hidden" role="alert" aria-live="polite">
        <span class="alert__dot" aria-hidden="true"></span>
        <span class="alert__text" id="formAlertText"></span>
      </div>

      <div class="card__body">
        <form id="accountForm" novalidate class="form-grid">
          <!-- Account Name -->
          <div class="form-col">
            <div class="input-group">
              <label class="label" for="accountName">Account Name *</label>
              <input id="accountName" class="input" type="text" autocomplete="off" placeholder="e.g., Cash" required />
              <p class="field-error" id="accountNameError"></p>
            </div>

            <!-- Account Nr. -->
            <div class="input-group">
              <label class="label" for="accountNo">Account Number *</label>
              <input id="accountNo" class="input" type="text" inputmode="numeric" autocomplete="off" placeholder="e.g., 101" title="Digits only ‚Ä¢ No decimals, spaces or letters" required />
              <small class="hint" id="acctHint">Assets start with <b>1</b>, Liabilities <b>2</b>, Equity <b>3</b>, Revenue <b>4</b>, Expense <b>5</b>.</small>
              <br>
              <small class="hint" id="acctHint">Digits only ‚Ä¢ No decimals, spaces or letters </small>
              <p class="field-error" id="accountNoError"></p>
            </div>

            <!-- Account Description -->
            <div class="input-group">
              <label class="label" for="description">Description</label>
              <textarea id="description" class="input" rows="3" placeholder="Short description"></textarea>
            </div>

            <!-- Normal Side -->
            <div class="grid grid--gap grid--cols-2">
              <div class="input-group">
                <label class="label" for="normalSide">Normal Side *</label>
                <select id="normalSide" class="input" required>
                  <option value="">Select‚Ä¶</option>
                  <option>Debit</option>
                  <option>Credit</option>
                </select>
              </div>

            <!-- Account Category -->
            <div class="grid grid--gap grid--cols-2">
              <div class="input-group">
                <label class="label" for="category">Category *</label>
                <select id="category" class="input" required>
                  <option value="">Select‚Ä¶</option>
                  <option>Asset</option>
                  <option>Liability</option>
                  <option>Equity</option>
                  <option>Revenue</option>
                  <option>Expense</option>
                </select>
              </div>

            <!-- Account Subcategory -->
            <div class="input-group">
                <label class="label" for="subcategory">Subcategory</label>
                <input id="subcategory" class="input" type="text" placeholder="e.g., Current Assets" />
              </div>
            </div>
            
            <!-- Balance + tracking fields section -->
            <div class="grid grid--gap grid--cols-2">
                <!-- Initial Balance -->
                <div class="input-group">
                    <label class="label" for="initialBalance">Initial Balance *</label>
                    <input id="initialBalance" class="input" type="number" step="0.01" value="0.00" required />
                </div>

            <!-- Debit -->
            <div class="input-group">
                <label class="label" for="debit">Debit</label>
                <input id="debit" class="input" type="number" step="0.01" value="0.00" readonly />
            </div>

            <!-- Credit -->
            <div class="input-group">
                <label class="label" for="credit">Credit</label>
                <input id="credit" class="input" type="number" step="0.01" value="0.00" readonly />
            </div>

            <!-- Balance -->
            <div class="input-group">
                <label class="label" for="balance">Balance</label>
                <input id="balance" class="input" type="number" step="0.01" value="0.00" readonly />
            </div>

            <!-- Date/Time Account Added -->
            <div class="input-group">
                <label class="label" for="created">Date/Time Account Added</label>
                <input id="created" class="input" type="datetime-local" readonly />
            </div>

            <!-- User ID -->
            <div class="input-group">
                <label class="label" for="addedBy">User ID</label>
                <input id="addedBy" class="input" type="text" value="admin" readonly />
            </div>

            <!-- Order -->
            <div class="input-group">
                <label class="label" for="order">Order</label>
                <input id="order" class="input" type="number" step="1" min="0" value="0" />
            </div>
            </div>

            <!-- Statement -->
              <div class="input-group">
                <label class="label" for="statement">Statement *</label>
                <select id="statement" class="input" required>
                  <option value="">Select‚Ä¶</option>
                  <option value="IS">Income Statement (IS)</option>
                  <option value="BS">Balance Sheet (BS)</option>
                  <option value="RE">Retained Earnings (RE)</option>
                </select>
              </div>
            </div>

            <!-- Comment -->
            <div class="input-group">
              <label class="label" for="comment">Comment (optional)</label>
              <textarea id="comment" class="input" rows="3" placeholder="Reason for change"></textarea>
            </div>

            <!-- Active Status -->
            <div class="input-group">
              <label class="label" for="active">Active</label>
              <div>
                <input id="active" type="checkbox" checked />
                <label for="active">This account is active</label>
              </div>
              <small class="hint" id="activeHint">You cannot deactivate when balance &gt; 0.</small>
            </div>

            <div class="row-right" style="margin-top:8px;">
              <button type="button" id="btnCancel" class="btn btn--secondary">Cancel</button>
              <button type="submit" id="btnSave" class="btn btn--primary">Save</button>
            </div>
          </div>
        </form>
      </div>
      </div>
    </section>

    <!-- Event log card -->
    <section class="card card--fluid card--animate card--stagger-2" aria-labelledby="logTitle" style="margin-top:16px;">
      <header class="card__header">
        <h2 id="logTitle" class="h3">Recent Changes (This Account)</h2>
      </header>
      <div class="card__body">
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>Event ID</th>
                <th>Action</th>
                <th>User</th>
                <th>Date/Time</th>
                <th>Before</th>
                <th>After</th>
                <th>Comment</th>
              </tr>
            </thead>
            <tbody id="eventRows">
              <tr class="muted"><td colspan="7" style="text-align:center; padding:16px;">No events yet</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="app-footer__inner">
      <nav class="footer-nav">
        <a href="../help.html" class="link">Help</a>
        <a href="../privacy.html" class="link">Privacy</a>
        <a href="../terms.html" class="link">Terms</a>
      </nav>
      <small class="muted">¬© 2025 LEDGR ¬∑ Build v0.1</small>
    </div>
  </footer>

<!-- Global JS + Accounts module -->
  <script src="../assets/js/app.js"></script>
  <script src="../assets/js/accounts-form.js"></script>
  <script>
    // Initialize the form page
    window.accountsForm?.init?.();
  </script>
</body>
</html>
