<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chart of Accounts</title>

  <!-- Global theme -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Oswald:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/styles.css" />
  <!-- Accounts-only styles -->
  <link rel="stylesheet" href="../assets/css/accounts.css" />
</head>

<body class="page">
  <!-- Header -->
  <header class="app-header app-header--band">
  <div class="app-header__inner">
    <!-- Left: Brand -->
    <a class="app-header__brand" href="../dashboard.html" aria-label="LEDGR Home">
      <img src="../assets/img/logo.png" alt="LEDGR ‚Äî The smart way to balance business" class="app-header__logo" />
    </a>

    <!-- Center: Primary Nav (inside the dark band) -->
    <nav class="nav nav--primary">
      <a class="nav__link is-active" href="./coa-list.html">Accounts</a>
      <a class="nav__link" href="../journal/je-create.html">Journal</a>
      <a class="nav__link" href="../reports/reports.html">Reports</a>
      <a class="nav__link" href="../dashboard.html">Dashboard</a>
    </nav>

    <!-- Right: Notifications + User -->
    <div class="app-header__right">
      <button class="icon-btn bell" aria-label="Notifications">üîî</button>
      <div class="user-chip" title="Signed in as">
        <span class="avatar" aria-hidden="true">A</span>
        <span class="user-chip__text">
          <strong id="userName">Admin User</strong>
          <span class="muted">Admin</span>
        </span>
      </div>
      <button class="icon-btn caret" aria-label="User menu" title="User menu">‚ñæ</button>
    </div>
  </div>
</header>

<!-- Back link -->
<nav class="back-nav back-nav--minimal">
  <a href="../admin-user-management.html" class="back-link" aria-label="Return to previous page">
    ‚Üê Return to Previous Page
  </a>
</nav>


  <!-- Main -->
  <main class="container container--xl">
    
    <!-- Top-left calendar -->
    <section class="toolbar" aria-label="Calendar and quick actions">
      <div class="input-group">
        <label class="label" for="coaDateFrom">From</label>
        <input id="coaDateFrom" type="date" class="input" />
      </div>
      <div class="input-group">
        <label class="label" for="coaDateTo">To</label>
        <input id="coaDateTo" type="date" class="input" />
      </div>

      <div class="flex-spacer"></div>

      <!-- Admin-only: hidden by JS for non-admin roles -->
      <a id="btnAddAccount" class="btn btn--primary" href="./coa-form.html">Add Account</a>
    </section>

    <section class="card card--fluid" aria-labelledby="coaTitle">      <header class="card__header">
        <h1 id="coaTitle" class="h2">Chart of Accounts</h1>
        <p class="body1 muted">Search and filter accounts; click an account to open its ledger.</p>
      </header>

      <div class="card__body">
        <form id="coaFilterForm" class="grid grid--cols-6 grid--gap">
          <div class="input-group">
            <label class="label" for="fCategory">Category</label>
            <select id="fCategory" class="input">
              <option value="">All</option>
              <option>Asset</option>
              <option>Liability</option>
              <option>Equity</option>
              <option>Revenue</option>
              <option>Expense</option>
            </select>
          </div>

          <div class="input-group">
            <label class="label" for="fSubcategory">Subcategory</label>
            <input id="fSubcategory" class="input" type="text" placeholder="e.g., Current Assets" />
          </div>

          <div class="input-group">
            <label class="label" for="fNormalSide">Normal Side</label>
            <select id="fNormalSide" class="input">
              <option value="">All</option>
              <option>Debit</option>
              <option>Credit</option>
            </select>
          </div>

          <div class="input-group">
            <label class="label" for="fAcctFrom">Acct # From</label>
            <input id="fAcctFrom" class="input" type="number" inputmode="numeric" />
          </div>

          <div class="input-group">
            <label class="label" for="fAcctTo">Acct # To</label>
            <input id="fAcctTo" class="input" type="number" inputmode="numeric" />
          </div>

          <div class="input-group">
            <label class="label" for="fAmtMin">Amount Min</label>
            <input id="fAmtMin" class="input" type="number" step="0.01" />
          </div>

          <div class="input-group">
            <label class="label" for="fAmtMax">Amount Max</label>
            <input id="fAmtMax" class="input" type="number" step="0.01" />
          </div>

          <div class="input-group" style="grid-column: span 2;">
            <label class="label" for="fSearch">Search</label>
            <input id="fSearch" class="input" type="search" placeholder="Account number or name" />
          </div>

          <div class="input-group" style="align-self:end;">
            <button type="button" id="btnClearFilters" class="btn btn--secondary">Clear Filters</button>
          </div>
          <div class="input-group" style="align-self:end;">
            <button type="submit" class="btn btn--primary">Apply Filters</button>
          </div>
        </form>
      </div>

      <div class="card__body">
        <div class="table-actions">
          <button id="btnExportCsv" class="btn btn--secondary" type="button">Export CSV</button>
        </div>

        <div id="coaAlert" class="alert -error is-hidden" role="alert" aria-live="polite">
          <span class="alert__dot" aria-hidden="true"></span>
          <span class="alert__text" id="coaAlertText">There was a problem loading accounts.</span>
        </div>

        <div class="table-wrap">
          <table class="table" aria-describedby="coaCaption">
            <caption id="coaCaption" class="sr-only">Accounts with monetary values shown to two decimals and thousand separators.</caption>
            <thead>
              <tr>
                <th>Account No.</th>
                <th>Name</th>
                <th>Description</th>
                <th>Normal Side</th>
                <th>Category</th>
                <th>Subcategory</th>
                <th>Initial Balance</th>
                <th>Debit</th>
                <th>Credit</th>
                <th>Balance</th>
                <th>Statement</th>
                <th>Order</th>
                <th>Added By</th>
                <th>Created</th>
                <th>Updated</th>
                <th>Status</th>
                <th class="text-right">Actions</th>
              </tr>
            </thead>
            <tbody id="coaRows">
              <tr class="muted"><td colspan="17" style="text-align:center; padding:24px;">Loading‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>

        <nav class="pagination" aria-label="Accounts pages">
          <button class="btn btn--secondary" id="pgPrev" type="button" disabled>Prev</button>
          <span class="pagination__status" id="pgStatus">Page 1 of 1</span>
          <button class="btn btn--secondary" id="pgNext" type="button" disabled>Next</button>
        </nav>

        <p class="body2 muted" style="margin-top:16px;">
          <strong>Legend:</strong> IS = Income Statement, BS = Balance Sheet, RE = Retained Earnings
        </p>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="app-footer">
    <div class="app-footer__inner">
      <nav class="footer-nav">
        <a href="../help.html" class="link">Help</a>
        <a href="../privacy.html" class="link">Privacy</a>
        <a href="../terms.html" class="link">Terms</a>
      </nav>
      <small class="muted">¬© 2025 LEDGR ¬∑ Build v0.1</small>
    </div>
  </footer>

<!-- Global JS + Accounts module -->
<script src="../assets/js/app.js"></script>
<script src="../assets/js/accounts.js"></script> 
<script>
  window.addEventListener('DOMContentLoaded', function(){
    window.coa?.initListPage?.({
      tableSel:'#coaRows',
      alertSel:'#coaAlert',
      alertTextSel:'#coaAlertText',
      exportBtn:'#btnExportCsv',
      clearBtn:'#btnClearFilters',
      formSel:'#coaFilterForm',
      dateFrom:'#coaDateFrom',
      dateTo:'#coaDateTo',
      searchSel:'#fSearch',
      pagination:{prev:'#pgPrev', next:'#pgNext', status:'#pgStatus'},
      addBtn:'#btnAddAccount'
    });
  });
</script>

</body>
</html>
